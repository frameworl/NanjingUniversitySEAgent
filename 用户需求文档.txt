南大软件学院 SE 流程智能体 — 用户需求文档
版本：v1.0
日期：2025-11-10

一、项目背景与目标
- 背景：南大软件学院课程与科研中存在大量流程规范（课程实践流程、项目管理流程、评审与验收流程、科研与开题流程、学术规范等），跨学期与跨团队复用难、检索效率低。
- 总目标：构建“SE流程智能体”，通过RAG（检索增强生成）将学院流程文档、模板、指南与常见问答统一管理与智能检索，提供工具化辅助与发布能力，支持被外部软件调用。
- 核心价值：显著提升流程咨询与执行效率，降低重复答疑成本，形成可维护的流程知识资产。

二、用户画像与使用场景
- 学生：快速查询课程/项目流程、提交材料模板、时间节点、评分标准、常见问题。
- 教师/助教：统一答疑口径，配置流程变更通知，生成流程宣讲材料与清单。
- 项目负责人：依据流程生成执行清单（Checklist）、里程碑计划、风险提示；自动校验提交物合规性。
- 管理人员：发布新版流程，维护知识库，查看智能体使用数据与反馈，持续迭代。

典型场景
1) 流程问答：输入“软工实践第3次里程碑需要提交什么？”获得精确条目与来源链接。
2) 清单生成：输入“为开题准备一个待办清单”自动给出步骤与模板文件。
3) 合规检查：上传报告，智能体给出是否符合模板、是否缺章节、引用是否规范。
4) 版本对比：查询“本学期与上学期项目验收流程差异”。
5) 工具调用：检索后直接拉取相关模板、创建日程提醒、推送到团队协作平台。

三、范围与边界
- 包含：流程文档与模板的采集、结构化索引与混合检索、重排与过滤、长短期记忆、工具插件调用、DSL工作流配置、发布到华为与阿里云百炼平台、开放API调用。
- 不包含：流程制度的制定与审批、外部平台账户与资质的代办、与校内保密系统的深度对接（可留扩展接口）。

四、核心功能需求
1) 知识库与数据管理
   - 支持导入多来源文档：PDF/Word/Markdown、网页、表格、图片（OCR）。
   - 支持版本管理与元数据：学期、课程/项目、发布者、发布日期、适用范围。
   - 支持结构化分块与章节识别，保留上下文层级关系。

2) RAG检索与问答
   - 索引模式：语义向量索引 + 词法（BM25）索引的混合检索。
   - 嵌入模型：优先中文/多语表现好的开源方案，保证效果与可控成本。
   - 重排与过滤：采用交叉编码器重排，支持基于元数据的过滤（学期、课程、流程类型、版本）。
   - 结果可解释：返回片段、来源文档、章节路径、版本信息、置信度。

3) 智能体能力与工具插件
   - 工具调用：模板下载、清单生成、日程创建、消息推送、文档校验、Git/Jira/企业协作平台（如飞书/钉钉/企业微信）对接。
   - MCP（Model Context Protocol）与长期记忆：通过标准协议统一管理工具与记忆源，提升检索上下文质量。

4) 会话与长期记忆
   - 会话上下文短期记忆（窗口、要点聚合），长期记忆（语义摘要、主题分桶、时间衰减）。
   - 个性化：记住用户偏好（课程、角色），优先返回相关内容。

5) 工作流与DSL
   - 以DSL定义数据采集、索引构建、检索策略、重排与过滤、工具调用、记忆管理、发布配置。
   - 支持可视化流程图与一键执行。

6) 发布与集成
   - 在华为与阿里云百炼平台发布可用的智能体应用，提供访问入口。
   - 提供API/SDK（REST/JSON），支持被外部软件调用。

五、非功能需求
- 性能：P95响应时间 ≤ 2.5s（命中缓存与轻工具调用场景），复杂工具链 ≤ 5s。
- 准确性：Top-3命中率 ≥ 85%（基于评测集）；回答可引用来源。
- 可维护性：DSL可读可写，数据与索引更新自动化，支持灰度与回滚。
- 安全与合规：权限控制、审计日志、PII脱敏、版权合规、平台账号密钥安全管理。

六、交互与体验
- 统一入口：网页/企业协作机器人/云平台应用。
- 显示来源与版本，允许一键切换版本或展开上下文。
- 支持追问、引导式流程导航、可导出清单与时间表。

七、权限与安全
- 按角色与课程/项目可见范围控制检索结果。
- 密钥与凭证保管（KMS/Secrets），平台发布遵循各自安全策略。
- 访问与操作审计，异常行为告警。

八、验收标准
1) 功能验收：覆盖上述核心功能；提供流程截图与DSL文件；在华为、阿里云百炼平台成功发布并可访问；API被外部软件成功调用示例。
2) 质量验收：基准评测集准确率达标；压力测试与稳定性通过；日志与监控完整。
3) 文档验收：用户手册、技术实现文档、部署与发布说明、API说明、评测报告。

九、交付物清单
- 智能体流程截图（UI与平台发布页截图）
- DSL文件（定义数据、索引、检索、重排、过滤、工具、记忆、发布）
- RAG技术选型与实现细节说明（含理由）
- 应用发布信息（平台、入口、版本、配置信息）
- API调用示例与外部软件集成说明

十、风险与假设
- 风险：文档质量不一、平台配额与限流、模型与索引版本升级导致结果波动、权限隔离与合规要求变更。
- 假设：学院流程文档可用于教学与研究；云平台账户可用；允许集成企业协作工具。

十一、里程碑与计划（建议）
1) W1 数据采集与清洗、DSL骨架、索引PoC
2) W2 混合检索与重排、工具插件与长期记忆PoC
3) W3 评测与优化、发布到阿里云百炼
4) W4 发布到华为平台、API集成示例、文档与截图汇总

附：占位说明
- 流程截图：交付阶段由实际页面与平台发布页截图补充
- DSL文件：随实现产出 se_agent.dsl.yaml 并纳入提交